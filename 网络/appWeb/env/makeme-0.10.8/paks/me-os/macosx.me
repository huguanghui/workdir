/*
    macosx.me -- MAC OS X Settings
 */

Me.load({
    blend: [    
        'unix.me',
    ],

    ext: {
        'shlib': 'dylib',
        'shobj': 'dylib',
    },

    rules: {
        'c->c':   '${targets.compiler.path} -E -arch ${CC_ARCH} ${CFLAGS} ${DEFINES} ${INCLUDES} ${PREPROCESS} ${INPUT}',
        'c->o':   '${targets.compiler.path} -c -o ${OUTPUT} -arch ${CC_ARCH} ${MTUNE} ${CFLAGS} ${DEFINES} ${INCLUDES} ${PREPROCESS} ${INPUT}',
        'cpp->o': '${targets.compiler.path} -c -o ${OUTPUT} -arch ${CC_ARCH} ${MTUNE} ${CFLAGS} ${DEFINES} ${INCLUDES} ${PREPROCESS} ${INPUT}',
        'shlib':  '${targets.compiler.path} -dynamiclib -o ${OUTPUT} -arch ${CC_ARCH} ${LDFLAGS} ${LIBPATHS} -install_name @rpath/${LIBNAME} -compatibility_version ${settings.compatible} -current_version ${settings.compatible} ${INPUT} ${LIBS}',
        'lib':    '${targets.lib.path} -cr ${OUTPUT} ${INPUT}',
        'exe':    '${targets.compiler.path} -o ${OUTPUT} -arch ${CC_ARCH} ${LDFLAGS} ${LIBPATHS} ${INPUT} ${LIBS}',
        'gui':    '${targets.compiler.path} -o ${OUTPUT} -arch ${CC_ARCH} ${LDFLAGS} ${LIBPATHS} ${INPUT} ${LIBS}',
    },
    platform: {
        'arch-map': {
            x86: 'i686',
            x64: 'x86_64',
        },
    },
})
